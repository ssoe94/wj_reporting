import { createContext, useContext, useState, useEffect } from 'react';
import type { ReactNode } from 'react';

interface LangContextValue {
  lang: 'ko' | 'zh';
  setLang: (l: 'ko' | 'zh') => void;
  t: (key: string, params?: any) => string;
}

const translations: Record<'ko' | 'zh', Record<string, string>> = {
  ko: {
    title: '万佳生产数据管理平台',
    modelsTitle: '모델 관리',
    nav_summary: '현황 요약',
    nav_records: '생산 기록',
    nav_new: '신규 등록',
    nav_models: '모델 관리',
    dashboard: '대시보드',

    total_prod: '총 생산 건수',
    avg_ach: '평균 달성률',
    avg_def: '평균 불량률',
    total_prod_unit: '건',
    detailed_record: '상세 기록',
    minutes_unit: '분',
    click_date_guide: '날짜를 눌러 상세 데이터를 확인하세요',
    achievement_rate: '달성율',
    csv_upload: 'CSV 업로드',
    csv_save: 'CSV 저장',
    new_rec_title: '신규 생산 기록 등록',
    report_date: '보고일자',
    machine: '사출기',
    model_search: '모델 검색',
    plan_qty: '계획수량*',
    actual_qty: '양품수량*',
    reported_defect: '불량수량(보고)*',
    actual_defect: '불량수량(실제)',
    start_dt: '시작일시',
    end_dt: '종료일시',
    total_time: '총시간',
    idle_time: '부동시간(분)',
    idle_note: '부동시간 비고',
    run_time: '가동시간',
    cancel: '취소',
    save: '저장',
    saving: '저장중...',
    edit: '편집',
    delete: '삭제',
    close: '닫기',
    new_model: '+ 새 모델',
    search_placeholder: '모델 또는 Part 검색...',
    add_model: '새 모델 추가',
    edit_model: '모델 수정',
    brand: '万佳生产数据管理平台',
    brand_machining: '가공생산관리',
    records_title: '생산 기록',
    no_data: '데이터가 없습니다.',
    loading: '로딩 중…',
    select: '선택',
    save_record: '저장하기',
    confirm_delete: '정말 삭제하시겠습니까?',
    prod_time: '생산 시간',
    prod_report: '생산 보고',
    
    production_record: '생산기록',
    defect_record: '불량기록',
    time_record: '시간 기록',
    qty_personnel_record: '수량/인원 기록',
    supply_type: '공급유형',
    supply_type_placeholder: 'JIT / CSK / SVC',
    supply_type_placeholder_cskd: 'JIT / CSKD / SVC',
    rework_qty: '재작업 수량',
    semi_input_qty: '반제품투입',
    rework_input_qty: '재작업투입',
    total_input_colon: '총투입 :',
    total_defect_minus_rework_colon: '총불량-재작업 :',
    total_input_with_formula: '총투입 (반제품+재작업) :',
    final_defect_with_formula: '최종불량 (총불량-재작업) :',
    prod_qty_short: '생산수량',
    total_input_short: '총투입',
    final_defect_short: '최종불량',
    semi_input_qty_short: '반제품투입',
    rework_input_qty_short: '재작업투입',
    total_defect_short: '총불량',
    total_pieces: '총 사출수량',
    shot_ct: '사출기 C/T(초)',
    good_ct: '양품기준 C/T(초)',
    reset: '초기화',
    lite_mode: '경량 모드',
    delete_success: '삭제되었습니다',
    delete_fail: '삭제 실패',
    save_success: '저장되었습니다',
    save_fail: '저장 실패',
    required_error: '필수 항목을 입력해 주세요',
    update_success: '수정되었습니다',
    update_fail: '수정 실패',
    header_model: '适用 PART NO. 别变更内容',
    header_machine: '사출기번호',
    header_tonnage: '형체력(T)',
    header_plan: '계획생산량',
    header_actual: '양품생산량',
    header_defect: '불량생산량',
    header_start: '시작일시',
    header_end: '종료일시',
    header_run: '가동시간(분)',
    header_note: '비고',
    header_action: '액션',
    modal_edit_title: '기록 수정',
    ct_sec: 'C/T(초)',
    model: '모델',
    machine_no: '사출기번호',
    tonnage: '형체력(T)',
    nav_eco: 'ECO 관리',
    nav_analysis: '생산성 분석',
    ecoTitle: 'ECO 관리',
    new_eco: '새 ECO',
    edit_eco: 'ECO 수정',
    add_eco: '새 ECO 추가',
    eco_search_placeholder: 'ECO 또는 고객 검색...',
    eco_no: 'ECO 번호',
    customer: '고객사',
    description: '내용',
    received_date: '접수일',
    due_date: '완료 예정일',
    close_date: '완료일',
    status: '상태',
    prepared_date: '제정일',
    issued_date: '발표일',
    eco_model: '적용모델',
    change_reason: '변경 사유',
    change_details: '변경 내용',
    change_information: '변경 정보',
    part_details_info: 'Part 상세 정보',
    related_dates: '관련 일자',
    inventory_handling: '재고 처리',
    items: '항목',
    applicable_work_order: '备注 （适用工单/时间等）',
    storage_action: '库存处理方法',
    inventory_finished: '완제품 재고',
    inventory_material: '자재 재고',
    applicable_date: '적용일',
    form_type_regular: '정규',
    form_type_temp: '임시',
    delete_confirm: '정말 삭제하시겠습니까?',
    part: 'Part',
    part_no: 'Part No.',
    eco: 'ECO',
    part_status: 'Part Status',
    eco_status: 'ECO Status',
    selected_part_eco_details: '선택 Part ECO 상세',
    all: '전체',
    add_directly: '직접 추가',
    part_search_placeholder: 'Part No 검색...',
    eco_count: 'ECO 건수',
    description_edit_prompt: '의 Description을 수정하세요',
    add_new_part: '새 Part 추가',
    description_placeholder: 'Part 설명을 입력하세요',
    direct_input: '직접 입력',
    input_or_select: '입력 또는 선택',
    '분석 기간 설정': '분석 기간 설정',
    '시작일': '시작일',
    '종료일': '종료일',
    '주말 제외': '주말 제외',
    '기본값으로 초기화': '기본값으로 초기화',
    '비교하기': '비교하기',
    '비교 모드 해제': '비교 모드 해제',
    '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.': '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.',
    '선택된 날짜': '선택된 날짜',
    '날짜 비교 결과': '날짜 비교 결과',
    '사출기별 상세 비교': '사출기별 상세 비교',
    '사출기': '사출기',
    '모델': '모델',
    '양품수': '양품수',
    '성능률': '성능률',
    '품질률': '품질률',
    // OEE 툴팁
    'OEE_툴팁': `OEE(설비 종합 효율성): (가동률 × 성능률 × 품질률) / 10000
가동률: 전체 설비 실제 가동시간 / (17대 × 24시간)
성능률: 실제 생산수(양품+불량) / 목표 생산량
품질률: 양품수 / 실제 생산수`,
    '가동률_툴팁': '가동률(Availability): 전체 설비 실제 가동시간 / (17대 × 24시간)',
    '성능률_툴팁': '성능률(Performance): 실제 생산수(양품+불량) / 목표 생산량',
    '품질률_툴팁': '품질률(Quality): 양품수 / 실제 생산수',
    oee_title: 'OEE (설비 종합 효율성)', // OEE 대시보드 제목
    oee_desc: '설비 종합 효율성을 가동률(A), 성능률(P), 품질률(Q)로 분석합니다.', // OEE 설명
    downtime_title: '다운타임 분석', // 다운타임 카드 제목
    downtime_desc: '비고 필드의 다운타임 정보를 파싱하여 MTTR/MTBF 분석 및 개선 추적을 제공합니다.', // 다운타임 설명
    spc_title: 'SPC & 조기경보', // SPC 카드 제목
    spc_desc: '통계적 공정관리 및 이상 탐지',
    preparing: '준비 중...', // 준비중 텍스트
    login_title: '로그인',
    login_subtitle: '계정에 로그인하세요',
    username: '사용자명',
    password: '비밀번호',
    username_placeholder: '사용자명을 입력하세요',
    password_placeholder: '비밀번호를 입력하세요',
    login: '로그인',
    logging_in: '로그인 중...', 
    logout: '로그아웃',
    password_change: '비밀번호 변경',
    password_change_required: '비밀번호 변경 필수',
    temp_password_notice: '임시 비밀번호를 사용 중입니다. 보안을 위해 새로운 비밀번호로 변경해주세요.',
    current_password: '현재 비밀번호',
    new_password_label: '새 비밀번호 (최소 8자)',
    new_password_confirm: '새 비밀번호 확인',
    password_mismatch: '새 비밀번호가 일치하지 않습니다.',
    password_min_length: '새 비밀번호는 최소 8자 이상이어야 합니다.',
    password_change_success: '비밀번호가 성공적으로 변경되었습니다.',
    changing: '변경 중...', 
    request_signup: '가입요청하기',
    signup_request: '가입 요청',
    full_name: '성명',
    department: '부서',
    email: '이메일',
    submit_request: '요청 제출',
    signup_request_success: '가입 요청이 제출되었습니다. 관리자 승인 후 연락드리겠습니다.',
    signup_request_error: '가입 요청 중 오류가 발생했습니다.',
    email_domain_error: '@njwanjia.com 도메인 이메일만 사용 가능합니다.',
    language: '언어',
    start_date: '시작일',
    end_date: '종료일',
    exclude_weekends: '주말 제외',
    reset_to_default: '기본값으로 초기화',
    oee_trend: 'OEE 트렌드',
    availability: '가동률',
    performance: '성능률',
    quality: '품질률',
    compare: '비교하기',
    compare_mode_off: '비교 모드 해제',
    compare_mode_guide: '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.',
    weekday: '(평일)',
    weekend: '(주말)',
    selected_dates: '선택된 날짜',
    '호기': '호기',
    detail_view: '상세 보기',
    donut_view: '도넛 보기',
    total_downtime: '총 다운타임',
    other: '기타', // 파이차트 등에서 기타 항목, zh: 其他
    downtime_min: '다운타임(분)',
    time_min: '시간(분)',
    min_unit: '분',
    downtime: '다운타임',
    downtime_detail: '다운타임 상세',
    date: '날짜',
    reason: '사유',
    duration: '소요시간',
    models_desc: '모델 및 제품 정보를 관리합니다.',
    models_search_placeholder: '모델 또는 Part 검색...', 
    eco_desc: 'Engineering Change Order를 관리합니다.',
    eco2Title: 'ECO 통합검색',
    eco2_desc: 'ECO编号, 适用型号, Part no. 통합 검색이 가능합니다.',
    nav_eco2: 'ECO 관리2',
    new_part_spec_btn: '새 Part Spec',
    // 사이드바 네비게이션 번역
    nav_overview: '종합',
    nav_injection: '사출',
    nav_machining: '가공', 
    nav_sales: '영업',
    nav_development: '개발',
    nav_dashboard: 'Dashboard',
    nav_injection_summary: '사출현황요약',
    nav_injection_records: '사출생산기록',
    nav_injection_new: '사출생산등록',
    nav_machining_summary: '가공현황요약', 
    nav_machining_records: '가공생산기록',
    nav_machining_new: '가공생산등록',
    nav_inventory_analysis: '재고분석',
    nav_daily_report: '일일보고',
    nav_inventory_status: '재고 상세 현황',
    nav_eco_management: 'ECO 관리',
    nav_model_management: '모델관리',
    nav_eco2_dev: 'ECO管理 (开发中）',
    // 품질 섹션
    nav_quality: '품질',
    nav_quality_report: '불량 보고',
    nav_quality_stats: '불량 통계',
    brand_quality: '품질관리',
    
    // 가공 관련 불량 유형
    assembly_defect_title: '불량 분류',
    assembly_injection_defect: '사출불량',
    assembly_injection_defect_desc: '우리 회사 사출라인에서 생산된 불량품',
    assembly_outsourcing_defect: '외주불량', 
    assembly_outsourcing_defect_desc: '외주 업체에서 입고된 불량품',
    assembly_processing_defect: '가공불량',
    assembly_processing_defect_desc: '가공 과정에서 발생한 불량',
    injection_defect: '사출불량',
    assembly_incoming_defect: '입고불량',
    assembly_incoming_defect_desc: '사출불량 + 외주불량의 합계',
    processing_defects_title: '가공불량',
    outsourcing_defects_title: '외주불량',
    defect_type_placeholder: '불량 유형',
    defect_quantity_placeholder: '수량',
    add_defect_entry: '추가',
    defect_total: '총 불량수',
    defect_entry_edit: '편집',
    defect_entry_delete: '삭제',
    defect_type_duplicate_error: '이미 등록된 불량 유형입니다',
    defect_quantity_invalid_error: '수량은 1 이상의 정수를 입력해주세요',
    defect_type_required_error: '불량 유형을 입력해주세요',
    
    // 가공 생산 관련
    assembly_production_record: '가공 생산 기록',
    assembly_production_summary: '가공 생산 현황',
    assembly_production_register: '가공 생산 등록',
    assembly_line_no: '라인번호',
    assembly_plan_qty: '계획수량',
    assembly_actual_qty: '실제수량',
    assembly_defect_qty: '불량수량',
    assembly_operation_time: '가동시간',
    assembly_uptime_rate: '가동률 (%)', 
    
    // Assembly Form 추가 번역
    line_select: '라인 선택',
    add_new_part_prompt: '새 Part 추가',
    production_qty_section: '생산 수량',
    plan_qty_required: '계획수량 *',
    input_qty: '투입수량',
    production_qty_required: '생산수량 *',
    incoming_defect_injection: '입고불량-사출',
    incoming_defect_outsourcing: '입고불량-외주',
    processing_defect: '가공불량',
    time_and_personnel: '시간 및 인원',
    total_time_min_required: '총시간 (분) *',
    idle_time_min: '부동시간 (분)',
    operation_time_min: '작업시간 (분)',
    worker_count: '작업인원 (명)',
    performance_indicators: '성과 지표',
    production_per_hour: '시간당 생산량',
    production_per_person_hour: '인당 시간당 생산량',
    operation_rate_percent: '가동률 (%)',
    operation_time_ratio: '작업시간/총시간',
    production_achievement_rate: '생산달성률 (%)',
    production_vs_plan: '생산/계획수량',
    total_defect_colon: '총 불량:',
    incoming_defect_colon: '입고 불량:',
    processing_defect_rate: '가공 불량률:',
    add_new_part_spec: '새 Part Spec 추가',
    new_part_added_success: '새 Part가 추가되었습니다',
    defect_rate: '불량률',
    'similar_parts_prompt': '유사한 Part {first} 외 {count}개가 있습니다. 해당 정보를 사용하시겠습니까?',
    sum: '합계',
    def_scratch: '스크래치',
    def_black_dot: '흑점',
    def_eaten_meat: '끌림',
    def_air_mark: 'Gas mark',
    def_deform: '변형',
    def_short_shot: '미충전',
    def_broken_pillar: '보스 파손',
    def_flow_mark: 'Flow mark',
    def_sink_mark: '수축',
    def_whitening: '백화',
    def_printing: '인쇄',
    def_rework: '가공/수리',
    def_other: '기타',
    def_incoming_other: '기타입고불량',
    def_processing_other: '기타가공불량',
    
    // ECO2 카드 UI 번역
    related_part_no: '연관 Part No.',
    no_parts_info: 'Part 정보 없음',
    change_reason_missing: '변경 사유 미입력',
    not_issued: '미발표',
    not_set: '미설정',
    more_count: '개 더',
    related_part_no_colon: '相关 Part No.',
    
    // 사출 기록 테이블 헤더
    table_machine: '호기',
    table_model: '모델', 
    table_part_no: 'Part no.',
    table_plan: '계획수량',
    table_actual: '실제수량', 
    table_defect: '불량수량',
    table_run_time: '가동시간 (분)',
    table_ct: '사이클타임 (초)',
    table_ct_delta: 'CT 편차 (초)',
    
    // 가공 기록 관련
    uph: 'UPH',

    // Historical Performance 관련
    historical_performance_title: '생산 기록 분석',
    part_no_history_tooltip: 'Part no. 생산 history 분석',
    error_loading_data: '데이터 로딩 중 오류가 발생했습니다',
    avg_cycle_time: '평균 C/T',
    back: '뒤로',

    // 생산 요약 관련
    plan_qty_summary: '계획수량',
    actual_qty_summary: '실제수량',
    injection_defect_summary: '사출불량',
    processing_defect_summary: '가공불량',
    incoming_defect_summary: '입고불량',
    total_defect_summary: '불량수량',
    total_time_summary: '총시간',
    operation_time_summary: '가동시간',
    idle_time_summary: '부동시간',
    workers_summary: '작업인원',
    achievement_rate_summary: '달성율',
    defect_rate_summary: '불량률',
    people_unit: '명',

    // Monitoring Page
    'monitoring.title': '사출기 생산 모니터링',
    'monitoring.last_updated': '최근 집계',
    'monitoring.update_button': '최신 데이터 갱신',
    'monitoring.updating_button': '최신 데이터 갱신 중...', 
    'monitoring.updating_message': 'MES 시스템에서 최신 데이터를 가져오는 중...', 
    'monitoring.machine_header': '사출기',
    'monitoring.cumulative_label': '누적',
    'monitoring.per_30min_label': '30분당',
    'monitoring.per_hour_label': '시간당',
    'monitoring.unit_label': '개',
    'monitoring.temp_label': '온도',
    'monitoring.no_data_char': '-',
    'monitoring.update_started_in_background': '백그라운드에서 데이터 업데이트가 시작되었습니다. 잠시 후 화면에 반영됩니다.',
    'monitoring.update_failed': '업데이트 시작 실패',

    // InjectionSetupPage.tsx
    'setup.page_title': '사출 C/T, 인원 기록',
    'setup.dashboard_button': '대시보드 보기',
    'setup.history_button': '셋업이력 보기',
    'setup.load_dashboard_fail': '대시보드 데이터를 불러오는데 실패했습니다.',
    'setup.status_setting': '설정중',
    'setup.status_testing': '테스트중',
    'setup.status_approved': '승인완료',
    'setup.status_rejected': '반려',
    'setup.edit_machine_setup': '사출기 셋업 편집',
    'setup.part_no': 'Part No.',
    'setup.model_code': '모델 & 파트',
    'setup.target_cycle_time': '목표 사이클 타임',
    'setup.test_cycle_time': '테스트 사이클 타임',
    'setup.approved_cycle_time': '승인 사이클 타임',
    'setup.status': '상태',
    'setup.memo': '메모',
    'setup.part_no_placeholder': 'Part No.를 입력하세요',
    'setup.model_code_placeholder': '모델 & 파트를 입력하세요',
    'setup.memo_placeholder': '셋업 관련 메모를 입력하세요',
    'setup.update': '업데이트',
    'setup.updating': '업데이트 중...',
    'setup.update_success': '셋업이 성공적으로 업데이트되었습니다',
    'setup.new_setup_button': '신규 셋업',
    'setup.new_setup_title': '신규 셋업 생성',
    'setup.prefill_success': '유사한 파트의 정보로 자동 완성되었습니다.',
    'setup.create_success': '신규 셋업이 성공적으로 생성되었습니다.',
    'setup.saving': '저장 중...',
    'setup.machine_no': '사출기 번호',
    'setup.machine_no_placeholder': '예: 1',
    'setup.note': '비고',
    'setup.note_placeholder': '비고를 입력하세요',
    'setup.edit_existing': '기존 설정 편집',
    'setup.edit_existing_desc': '현재 설정의 매개변수를 수정합니다.',
    'setup.create_new_version': '새 버전 만들기',
    'setup.create_new_version_desc': '현재 설정을 기반으로 새 버전을 만듭니다.',
    'setup.save_changes': '변경 사항 저장',
    'setup.new_version_success': '새 버전이 성공적으로 생성되었습니다.',
    'setup.new_version_fail': '새 버전 생성에 실패했습니다.',
    'select_machine': '사출기 선택',
    'target_cycle_time': '목표 사이클 타임',
    'standard_cycle_time': '표준 사이클 타임',

    // SetupDashboard.tsx
    'dashboard.total_setups_today': '오늘 총 셋업',
    'dashboard.pending_approvals': '승인 대기',
    'dashboard.approved_today': '승인 완료',
    'dashboard.rejected_today': '반려',
    'dashboard.active_machines_title': '사출기 C/T 셋업 현황',
    'dashboard.refresh_button': '새로고침',
    'dashboard.machine_id_unit': '호기',
    'dashboard.active_label': '활성',
    'dashboard.model_label': '모델',
    'dashboard.part_label': 'Part no.',
    'dashboard.cycletime_label': 'Cycle time',
    'dashboard.standard_ct_label': '표준C/T',
    'dashboard.target_ct_label': '설정C/T',
    'dashboard.mean_ct_label': '평균C/T',
    'dashboard.personnel_label': '인원',
    'dashboard.no_setup': '설정 없음',
    'dashboard.seconds_unit': '초',
    'dashboard.click_to_edit': '클릭하여 편집',

    // CycleTimeTableForm.tsx
    'ct_table.title': '사출기 셋업 (C/T)',
    'ct_table.title_ct_personnel': '사출기 셋업 (C/T & 인원)',
    'ct_table.description': '생산 중인 사출기의 사이클 타임을 기록 합니다.',
    'ct_table.setup_date_label': '설정 날짜 *',
    'ct_table.machine_header': '사출기번호*',
    'ct_table.model_header': 'Model & Description*',
    'ct_table.part_no_header': 'Part No.*',
    'ct_table.target_ct_header': '설정C/T(초)*',
    'ct_table.standard_ct_header': '표준C/T(초)',
    'ct_table.avg_ct_header': '평균C/T(초)',
    'ct_table.personnel_header': '배치인원수',
    'ct_table.action_header': '액션',
    'ct_table.select_option': '선택',
    'ct_table.machine_option': '{id}호기 - {ton}T',
    'ct_table.model_search_placeholder': 'Model & Description 검색',
    'ct_table.part_no_placeholder': 'Part No. 입력',
    'ct_table.target_ct_placeholder': '45',
    'ct_table.standard_ct_placeholder': '자동',
    'ct_table.avg_ct_placeholder': '-',
    'ct_table.guide_title': '작성 가이드',
    'ct_table.guide_date': '설정 날짜: C/T 기록 날짜',
    'ct_table.guide_machine': '사출기 번호: C/T을 기록할 사출기 번호를 선택',
    'ct_table.guide_model': 'Model: 모델코드 또는 모델명으로 검색 후 선택',
    'ct_table.guide_part_no': 'Part No.: 선택한 모델의 Part 번호를 선택',
    'ct_table.guide_target_ct': '설정C/T(초): 목표 Cycle Time(초) 입력',
    'ct_table.guide_standard_ct': '표준C/T(초): 기준 Cycle Time, 자동 조회되며 필요 시 수정 가능',
    'ct_table.guide_avg_ct': '평균C/T(초): 최근 생산 평균 Cycle Time, 사출기/Part 선택 시 자동 조회',
    'ct_table.add_row_button': '셋업 추가',
    'ct_table.reset_button': '초기화',
    'ct_table.saving_button': '저장 중...', 
    'ct_table.save_all_button': '일괄 저장',
    'ct_table.min_row_error': '최소 1개의 행이 필요합니다.',
    'ct_table.valid_row_error': '최소 1개의 유효한 셋업을 입력해주세요.',
    'ct_table.create_success': '{count}개의 셋업이 생성되었습니다.',
    'ct_table.create_fail': '셋업 생성에 실패했습니다.',

    // SetupHistory.tsx
    'history.view_timeline': '타임라인',
    'history.view_list': '목록',
    'history.machine_part_info': '{machine_no}번기 - {part_no}',
    'unit.seconds': '초',
    'history.machine_no_label': '사출기 번호',
    'history.part_no_label': 'Part No.',
    'history.status_label': '상태',
    'history.date_from_label': '시작일',
    'history.filter_button': '조회',
    'history.reset_button': '초기화',
    'history.title': '셋업 이력',
    'history.refresh_button': '새로고침',
    'history.no_data': '조회된 셋업 기록이 없습니다',
    'history.target_ct_label': '설정',
    'history.standard_ct_label': '표준',
    'history.mean_ct_label': '평균',
    'history.test_label': '테스트',
    'history.approved_label': '승인',
    'history.setup_by_label': '설정자',
    'history.test_count_label': '테스트 {count}회',
    'history.test_button': '테스트',
    'history.approve_button': '승인',
    'history.reject_button': '반려',
    'history.setup_note_label': '설정 비고',
    'history.rejection_reason_label': '반려 사유',
    'history.load_fail': '셋업 목록을 불러오는데 실패했습니다.',
    'history.prev_dates': '더 과거 날짜로',
    'history.next_dates': '더 최근 날짜로',
    'history.timeline_title': '사출 C/T, 인원 기록 타임라인',
    'history.back_to_dashboard': '대시보드로 돌아가기',
    'history.machine_unit': '호기',
    'history.detail_title': '셋업 상세 정보',
    'history.item_count': '{count}개 항목',
    'history.multi_select_on': '다중 선택',
    'history.multi_select_off': '선택 모드 해제',
    'history.select_all': '모두 선택',
    'history.select_none': '선택 해제',
    'history.selected_count': '{count}개 선택됨',
    'history.delete_selected': '선택 항목 삭제 ({count})',
    'history.delete_confirm': '{machine_no}호기 {part_no} 설정을 삭제하시겠습니까?',
    'history.delete_success': '설정이 삭제되었습니다.',
    'history.delete_fail': '삭제에 실패했습니다.',
    'history.select_items_to_delete': '삭제할 항목을 선택해주세요.',
    'history.bulk_delete_confirm': '선택된 {count}개의 설정을 삭제하시겠습니까?',
    'history.bulk_delete_success': '{count}개의 설정이 삭제되었습니다.',
    'history.bulk_delete_fail': '일부 설정 삭제에 실패했습니다.',
    'history.list_view_placeholder': '리스트 뷰는 준비 중입니다.',

    // ApprovalDialog.tsx
    'approval.approve_title': '셋업 승인',
    'approval.reject_title': '셋업 반려',
    'approval.machine_label': '사출기',
    'approval.machine_unit': '번기',
    'approval.part_no_label': 'Part No.',
    'approval.target_ct_label': '목표 사이클 타임',
    'approval.test_ct_label': '테스트 사이클 타임',
    'approval.avg_test_ct_label': '평균 테스트 사이클 타임',
    'approval.test_count_label': '테스트 횟수',
    'approval.quality_pass_rate_label': '품질 통과율',
    'approval.final_ct_label': '최종 승인 사이클 타임 (초) *',
    'approval.final_ct_guide': '승인된 사이클 타임이 PartSpec에 자동으로 반영됩니다.',
    'approval.reject_reason_label': '반려 사유 *',
    'approval.reject_reason_placeholder': '반려 사유를 구체적으로 입력해주세요',
    'approval.cancel_button': '취소',
    'approval.approving_button': '승인 중...', 
    'approval.rejecting_button': '반려 중...', 
    'approval.confirm_approve_button': '승인 확정',
    'approval.confirm_reject_button': '반려 확정',
    'approval.ct_error': '올바른 승인 사이클 타임을 입력해주세요.',
    'approval.reason_error': '반려 사유를 입력해주세요.',
    'approval.approve_success': '셋업이 승인되었습니다.',
    'approval.reject_success': '셋업이 반려되었습니다.',
    'approval.fail': '셋업 {action}에 실패했습니다.',

    // TestRecordModal.tsx
    'test_modal.title': '테스트 기록 추가',
    'test_modal.machine_label': '사출기',
    'test_modal.part_no_label': 'Part No.',
    'test_modal.target_ct_label': '목표 사이클 타임',
    'test_modal.existing_tests_label': '기존 테스트',
    'test_modal.actual_ct_label': '실제 사이클 타임 (초) *',
    'test_modal.actual_ct_placeholder': '목표: {time}초',
    'test_modal.test_qty_label': '테스트 수량',
    'test_modal.quality_status_label': '품질 상태',
    'test_modal.quality_ok': '양호',
    'test_modal.quality_fail': '불량',
    'test_modal.note_label': '테스트 비고',
    'test_modal.note_placeholder': '테스트 과정에서 발견한 특이사항을 입력하세요',
    'test_modal.cancel_button': '취소',
    'test_modal.adding_button': '추가 중...', 
    'test_modal.add_button': '테스트 기록 추가',
    'test_modal.ct_error': '올바른 실제 사이클 타임을 입력해주세요.',
    'test_modal.qty_error': '올바른 테스트 수량을 입력해주세요.',
    'test_modal.add_success': '테스트 기록이 추가되었습니다.',
    'test_modal.add_fail': '테스트 기록 추가에 실패했습니다.',

    // CycleTimeHistoryGraph.tsx
    'history.ct_trend_title': '{prefix} C/T 추이 분석',
    'history.total_records': '총 기록',
    'history.date_range': '기간',
    'history.models_count': '모델 수',
  },
  zh: {
    title: '万佳生产数据管理平台',
    modelsTitle: '型号管理',
    nav_summary: '现况概要',
    nav_records: '生产记录',
    nav_new: '新增登记',
    nav_models: '型号管理',
    dashboard: '仪表板',

    total_prod: '总生产件数',
    avg_ach: '平均达成率',
    avg_def: '平均不良率',
    total_prod_unit: '件',
    detailed_record: '详细记录',
    minutes_unit: '分',
    click_date_guide: '点击日期查看详细数据',
    achievement_rate: '达成率',
    csv_upload: '上传CSV',
    csv_save: '保存CSV',
    new_rec_title: '新增生产记录登记',
    report_date: '报告日期',
    machine: '注塑机',
    model_search: '型号搜索',
    plan_qty: '计划数量*', 
    actual_qty: '良品数量*', 
    reported_defect: '不良数量(报)*',
    actual_defect: '不良数量(实)',
    start_dt: '开始时间',
    end_dt: '结束时间',
    total_time: '总时间',
    idle_time: '停机时间(分)',
    idle_note: '停机备注',
    run_time: '运行时间',
    cancel: '取消',
    save: '保存',
    saving: '保存中...',
    edit: '编辑',
    delete: '删除',
    close: '关闭',
    new_model: '+ 新型号',
    search_placeholder: '搜索型号或部件...', 
    add_model: '新增型号',
    edit_model: '编辑型号',
    brand: '万佳生产数据管理平台',
    brand_machining: '加工生产管理',
    records_title: '生产记录',
    no_data: '暂无数据',
    loading: '加载中…',
    select: '选择',
    save_record: '保存',
    confirm_delete: '确定要删除吗？',
    prod_time: '生产时间',
    prod_report: '生产报告',
    
    production_record: '生产记录',
    defect_record: '不良记录',
    time_record: '时间记录',
    qty_personnel_record: '数量/人员记录',
    supply_type: '供给类型',
    supply_type_placeholder: 'JIT / CSK / SVC',
    supply_type_placeholder_cskd: 'JIT / CSKD / SVC',
    rework_qty: '返工数量',
    semi_input_qty: '半成品投入',
    rework_input_qty: '返工投入',
    total_input_colon: '总投入：',
    total_defect_minus_rework_colon: '总不良-返工：',
    total_input_with_formula: '总投入 (半成品+返工)：',
    final_defect_with_formula: '最终不良 (总不良-返工)：',
    prod_qty_short: '生产数量',
    total_input_short: '总投入',
    final_defect_short: '最终不良',
    semi_input_qty_short: '半成品投入',
    rework_input_qty_short: '返工投入',
    total_defect_short: '总不良',
    total_pieces: '总射出数',
    shot_ct: '注塑机 C/T(秒)',
    good_ct: '良品基准 C/T(秒)',
    reset: '重置',
    lite_mode: '简易模式',
    delete_success: '已删除',
    delete_fail: '删除失败',
    save_success: '已保存',
    save_fail: '保存失败',
    required_error: '请填写必填项',
    update_success: '已更新',
    update_fail: '更新失败',
    header_model: '适用 PART NO. 别变更内容',
    header_machine: '注塑机号',
    header_tonnage: '锁模力(T)',
    header_plan: '计划产量',
    header_actual: '良品产量',
    header_defect: '不良产量',
    header_start: '开始时间',
    header_end: '结束时间',
    header_run: '运行时间(分)',
    header_note: '备注',
    header_action: '操作',
    modal_edit_title: '编辑记录',
    ct_sec: 'C/T(秒)',
    model: '型号',
    machine_no: '注塑机号',
    tonnage: '锁模力(T)',
    nav_eco: 'ECO管理',
    nav_analysis: '生产力分析',
    ecoTitle: 'ECO管理',
    new_eco: '新增ECO',
    edit_eco: '编辑ECO',
    add_eco: '新增ECO',
    eco_search_placeholder: '搜索ECO或客户...', 
    eco_no: 'ECO编号',
    customer: '客户',
    description: '内容',
    received_date: '接收日期',
    due_date: '预计完成日期',
    close_date: '完成日期',
    status: '状态',
    prepared_date: '制定日',
    issued_date: '发布日',
    eco_model: '适用型号',
    change_reason: '变更理由',
    change_details: '变更内容',
    change_information: '变更信息',
    part_details_info: '部件详情信息',
    related_dates: '相关日期',
    inventory_handling: '库存处理',
    items: '项',
    applicable_work_order: '备注 （适用工单/时间等）',
    storage_action: '库存处理方法',
    inventory_finished: '成品库存',
    inventory_material: '材料库存',
    applicable_date: '适用日期',
    form_type_regular: '正式',
    form_type_temp: '临时',
    delete_confirm: '确定要删除吗?',
    part: '部件',
    eco: 'ECO',
    part_status: '部件状态',
    eco_status: 'ECO状态',
    selected_part_eco_details: '所选部件ECO明细',
    all: '全部',
    add_directly: '直接添加',
    part_search_placeholder: '搜索Part No...', 
    eco_count: 'ECO数量',
    description_edit_prompt: '的Description修改',
    add_new_part: '添加新Part',
    description_placeholder: '请输入Part描述',
    direct_input: '直接输入',
    input_or_select: '输入或选择',
    '분석 기간 설정': '分析期间设置',
    '시작일': '开始日期',
    '종료일': '结束日期',
    '주말 제외': '排除周末',
    '기본값으로 초기화': '恢复默认',
    '비교하기': '对比',
    '비교 모드 해제': '取消对比模式',
    '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.': '对比模式：请在图表中点击两个日期进行对比。',
    '선택된 날짜': '已选日期',
    '날짜 비교 결과': '日期对比结果',
    '사출기별 상세 비교': '按注塑机详细对比',
    '사출기': '注塑机',
    '모델': '机型',
    '양품수': '良品数',
    '성능률': '性能率',
    '품질률': '品质率',
    // OEE 툴팁
    'OEE_툴팁': `OEE（设备综合效率）：(稼动率 × 性能率 × 品质率) / 10000
稼动率：所有设备实际运行时间 / (17台 × 24小时)
性能率：实际产量（良品+不良品）/ 目标产量
品质率：良品数 / 实际产量`,
    '가동률_툴팁': '稼动率(Availability)：所有设备实际运行时间 / (17台 × 24小时)',
    '성능률_툴팁': '性能率(Performance)：实际产量（良品+不良品）/ 目标产量',
    '품질률_툴팁': '品质率(Quality)：良品数 / 实际产量',
    oee_title: 'OEE（设备综合效率）', // OEE 대시보드 제목
    oee_desc: '通过稼动率(A)、性能率(P)、品质率(Q)分析设备综合效率。', // OEE 설명
    downtime_title: '停机分析', // 다운타임 카드 제목
    downtime_desc: '解析备注栏的停机信息，提供MTTR/MTBF分析及改善追踪。', // 다운타임 설명
    spc_title: 'SPC & 预警', // SPC 카드 제목
    spc_desc: '统计过程管理与异常检测',
    preparing: '准备中...', // 준비중 텍스트
    login_title: '登录',
    login_subtitle: '请登录您的账户',
    username: '用户名',
    password: '密码',
    username_placeholder: '请输入用户名',
    password_placeholder: '请输入密码',
    login: '登录',
    logging_in: '登录中...',
    logout: '退出',
    password_change: '修改密码',
    password_change_required: '必须更改密码',
    temp_password_notice: '您正在使用临时密码。出于安全考虑，请更改为新的密码。',
    current_password: '当前密码',
    new_password_label: '新密码（至少8位）',
    new_password_confirm: '确认新密码',
    password_mismatch: '两次输入的新密码不一致。',
    password_min_length: '新密码至少8位。',
    password_change_success: '密码修改成功。',
    changing: '修改中...', 
    request_signup: '申请注册',
    signup_request: '注册申请',
    full_name: '姓名',
    department: '部门',
    email: '邮箱',
    submit_request: '提交申请',
    signup_request_success: '注册申请已提交，管理员审批后将与您联系。',
    signup_request_error: '注册申请过程中发生错误。',
    email_domain_error: '仅支持 @njwanjia.com 域名邮箱。',
    language: '语言',
    start_date: '开始日期',
    end_date: '结束日期',
    exclude_weekends: '排除周末',
    reset_to_default: '恢复默认',
    oee_trend: 'OEE趋势',
    availability: '稼动率',
    performance: '性能率',
    quality: '品质率',
    compare: '对比',
    compare_mode_off: '取消对比模式',
    compare_mode_guide: '对比模式：请在图表中点击两个日期进行对比。',
    weekday: '(工作日)',
    weekend: '(周末)',
    selected_dates: '已选日期',
    '호기': '号机',
    detail_view: '详细查看',
    donut_view: '环形图',
    total_downtime: '总停机',
    other: '其他', // 파이차트 등에서 기타 항목
    downtime_min: '停机(分)',
    time_min: '时间(分)',
    min_unit: '分钟',
    downtime: '停机',
    downtime_detail: '停机详情',
    date: '日期',
    reason: '原因',
    duration: '用时',
    part_specs: 'Part Spec列表',
    part_no: 'Part No.',
    mold_type: '模具类型',
    color: '颜色',
    resin_type: '树脂种类',
    resin_code: '树脂代码',
    net_g: '净重(g)',
    sr_g: 'S/R重(g)',
    ct_s: 'C/T(秒)',
    cavity: '模穴数',
    valid_from: '生效日期',
    new_part_spec: '新增Part Spec',
    part_spec_save_success: 'Part Spec已保存',
    part_spec_save_fail: 'Part Spec保存失败',
    models_desc: '管理型号及产品信息。',
    models_search_placeholder: '搜索型号或部件...', 
    eco_desc: '管理Engineering Change Order。',
    eco2Title: 'ECO 统合搜索',
    eco2_desc: 'ECO编号, 适用型号, Part no. 统合搜索功能。',
    nav_eco2: 'ECO管理2',
    new_part_spec_btn: '新增Part Spec',
    // 사이드바 네비게이션 번역
    nav_overview: '综合',
    nav_injection: '注塑',
    nav_machining: '加工', 
    nav_sales: '销售',
    nav_development: '开发',
    nav_dashboard: '仪表板',
    nav_injection_summary: '注塑现况概要',
    nav_injection_records: '注塑生产记录',
    nav_injection_new: '注塑生产登记',
    nav_machining_summary: '加工现况概要', 
    nav_machining_records: '加工生产记录',
    nav_machining_new: '加工生产登记',
    nav_inventory_analysis: '库存分析',
    nav_daily_report: '日报',
    nav_inventory_status: '库存详细现况',
    nav_eco_management: 'ECO管理',
    nav_model_management: '型号管理',
    nav_eco2_dev: 'ECO管理 (开发中）',
    // 品质版块
    nav_quality: '品质',
    nav_quality_report: '不良报告',
    nav_quality_stats: '不良统计',
    brand_quality: '品质管理',
    
    // 가공 관련 불량 유형
    assembly_defect_title: '不良分类',
    assembly_injection_defect: '注塑不良',
    assembly_injection_defect_desc: '我司注塑产线上生产的不良品',
    assembly_outsourcing_defect: '外协不良', 
    assembly_outsourcing_defect_desc: '外协供应商送来的不良品',
    assembly_processing_defect: '加工不良',
    assembly_processing_defect_desc: '在加工流程中产生的不良',
    injection_defect: '注塑不良',
    assembly_incoming_defect: '来料不良',
    assembly_incoming_defect_desc: '注塑不良 + 外协不良 的合计',
    processing_defects_title: '加工不良',
    outsourcing_defects_title: '外包不良',
    defect_type_placeholder: '不良类型',
    defect_quantity_placeholder: '数量',
    add_defect_entry: '添加',
    defect_total: '总不良数',
    defect_entry_edit: '编辑',
    defect_entry_delete: '删除',
    defect_type_duplicate_error: '已存在相同的不良类型',
    defect_quantity_invalid_error: '数量必须是大于0的整数',
    defect_type_required_error: '请输入不良类型',
    
    // 가공 생산 관련
    assembly_production_record: '加工生产记录',
    assembly_production_summary: '加工生产现况',
    assembly_production_register: '加工生产登记',
    assembly_line_no: '产线号',
    assembly_plan_qty: '计划数量',
    assembly_actual_qty: '实际数量',
    assembly_defect_qty: '不良数量',
    assembly_operation_time: '运行时间',
    assembly_uptime_rate: '设备利用率 (%)', 
    
    // Assembly Form 추가 번역
    line_select: '选择产线',
    add_new_part_prompt: '添加新零件',
    production_qty_section: '生产数量',
    plan_qty_required: '计划数量 *',
    input_qty: '投入数量',
    production_qty_required: '生产数量 *',
    incoming_defect_injection: '来料不良-注塑',
    incoming_defect_outsourcing: '来料不良-外协',
    processing_defect: '加工不良',
    time_and_personnel: '时间及人员',
    total_time_min_required: '总时间 (分) *',
    idle_time_min: '停机时间 (分)',
    operation_time_min: '作业时间 (分)',
    worker_count: '作业人员 (名)',
    performance_indicators: '绩效指标',
    production_per_hour: '每小时产量',
    production_per_person_hour: '人均每小时产量',
    operation_rate_percent: '设备利用率 (%)',
    operation_time_ratio: '作业时间/总时间',
    production_achievement_rate: '生产达成率 (%)',
    production_vs_plan: '生产/计划数量',
    total_defect_colon: '总不良：',
    incoming_defect_colon: '来料不良：',
    processing_defect_rate: '加工不良率：',
    add_new_part_spec: '添加新零件规格',
    new_part_added_success: '新零件已添加',
    defect_rate: '不良率',
    similar_parts_prompt: '存在相似的零件 {first} 等共 {count} 个。是否使用其信息进行预填？',
    sum: '合计',
    def_scratch: '划伤',
    def_black_dot: '黑点',
    def_eaten_meat: '吃肉',
    def_air_mark: '气印',
    def_deform: '变形',
    def_short_shot: '浇不足',
    def_broken_pillar: '断柱子',
    def_flow_mark: '料花',
    def_sink_mark: '缩瘪',
    def_whitening: '发白',
    def_printing: '印刷',
    def_rework: '加工修理',
    def_other: '其他',
    def_incoming_other: '其他入库不良',
    def_processing_other: '其他加工不良',
    
    // ECO2 카드 UI 번역
    related_part_no: '相关零件号',
    no_parts_info: '无零件信息',
    change_reason_missing: '未输入变更理由',
    not_issued: '未发布',
    not_set: '未设置',
    more_count: '个更多',
    related_part_no_colon: '相关 Part No.',
    
    // 사출 기록 테이블 헤더
    table_machine: '机台',
    table_model: '型号',
    table_part_no: 'Part no.', 
    table_plan: '计划数量',
    table_actual: '实际数量',
    table_defect: '不良数量',
    table_run_time: '运转时间 (分)',
    table_ct: '周期时间 (秒)',
    table_ct_delta: '周期差异 (秒)',
    
    // 가공 기록 관련
    uph: 'UPH',

    // Historical Performance 관련
    historical_performance_title: '生产记录分析',
    part_no_history_tooltip: 'Part no. 生产历史分析',
    error_loading_data: '数据加载时发生错误',
    avg_cycle_time: '平均周期',
    back: '返回',

    // 생산 요약 관련
    plan_qty_summary: '计划数量',
    actual_qty_summary: '实际数量',
    injection_defect_summary: '注塑不良',
    processing_defect_summary: '加工不良',
    incoming_defect_summary: '来料不良',
    total_defect_summary: '不良数量',
    total_time_summary: '总时间',
    operation_time_summary: '作业时间',
    idle_time_summary: '停机时间',
    workers_summary: '作业人员',
    achievement_rate_summary: '达成率',
    defect_rate_summary: '不良率',
    people_unit: '名',

    // Monitoring Page
    'monitoring.title': '注塑机监控',
    'monitoring.last_updated': '最近统计',
    'monitoring.update_button': '更新最新数据',
    'monitoring.updating_button': '正在更新最新数据...', 
    'monitoring.updating_message': '正在从MES系统获取最新数据...', 
    'monitoring.machine_header': '注塑机',
    'monitoring.cumulative_label': '累计',
    'monitoring.per_30min_label': '每30分钟',
    'monitoring.per_hour_label': '每小时',
    'monitoring.unit_label': '个',
    'monitoring.temp_label': '温度',
    'monitoring.no_data_char': '-',
    'monitoring.update_started_in_background': '后台数据更新已开始，请稍后刷新。',
    'monitoring.update_failed': '更新启动失败',

    // InjectionSetupPage.tsx
    'setup.page_title': '注塑周期人员记录',
    'setup.dashboard_button': '返回仪表板',
    'setup.history_button': '设置履历查看',
    'setup.load_dashboard_fail': '加载仪表板数据失败。',
    'setup.status_setting': '设置中',
    'setup.status_testing': '测试中',
    'setup.status_approved': '已批准',
    'setup.status_rejected': '已拒绝',
    'setup.edit_machine_setup': '编辑注塑机设置',
    'setup.part_no': 'Part No.',
    'setup.model_code': '型号与部品',
    'setup.target_cycle_time': '目标周期时间',
    'setup.test_cycle_time': '测试周期时间',
    'setup.approved_cycle_time': '批准周期时间',
    'setup.status': '状态',
    'setup.memo': '备注',
    'setup.part_no_placeholder': '请输入Part No.',
    'setup.model_code_placeholder': '请输入型号与部品',
    'setup.memo_placeholder': '请输入设置相关备注',
    'setup.update': '更新',
    'setup.updating': '更新中...',
    'setup.update_success': '设置已成功更新',
    'setup.new_setup_button': '新建设置',
    'setup.new_setup_title': '创建新设置',
    'setup.prefill_success': '已使用类似零件的数据自动完成。',
    'setup.create_success': '新设置创建成功。',
    'setup.saving': '保存中...',
    'setup.machine_no': '注塑机号',
    'setup.machine_no_placeholder': '例如：1',
    'setup.note': '备注',
    'setup.note_placeholder': '请输入备注',
    'setup.edit_existing': '编辑现有设置',
    'setup.edit_existing_desc': '修改当前设置的参数。',
    'setup.create_new_version': '创建新版本',
    'setup.create_new_version_desc': '基于当前设置创建新的版本。',
    'setup.save_changes': '保存修改',
    'setup.new_version_success': '新版本创建成功',
    'setup.new_version_fail': '新版本创建失败',
    'setup.creating': '创建中...',
    'select_machine': '选择注-塑机',
    'target_cycle_time': '目标周期时间',
    'standard_cycle_time': '标准周期时间',

    // SetupDashboard.tsx
    'dashboard.total_setups_today': '今日总设置',
    'dashboard.pending_approvals': '等待批准',
    'dashboard.approved_today': '今日已批准',
    'dashboard.rejected_today': '今日已拒绝',
    'dashboard.active_machines_title': '注塑机 C/T 设置状态',
    'dashboard.refresh_button': '刷新',
    'dashboard.machine_id_unit': '号机',
    'dashboard.active_label': '活动',
    'dashboard.model_label': '型号',
    'dashboard.part_label': 'Part no.',
    'dashboard.cycletime_label': '周期',
    'dashboard.standard_ct_label': '标准周期',
    'dashboard.target_ct_label': '设置周期',
    'dashboard.mean_ct_label': '平均周期',
    'dashboard.personnel_label': '人员',
    'dashboard.no_setup': '没有设置',
    'dashboard.seconds_unit': '秒',
    'dashboard.click_to_edit': '点击编辑',

    // CycleTimeTableForm.tsx
    'ct_table.title': '注塑机设置 (C/T)',
    'ct_table.title_ct_personnel': '注塑机设置 (C/T & 人员)',
    'ct_table.description': '记录生产中注塑机的周期时间。',
    'ct_table.setup_date_label': '设置日期 *',
    'ct_table.machine_header': '注塑机号*',
    'ct_table.model_header': '型号与描述*',
    'ct_table.part_no_header': 'Part No.*',
    'ct_table.target_ct_header': '设置C/T(秒)*',
    'ct_table.standard_ct_header': '标准C/T(秒)',
    'ct_table.avg_ct_header': '平均C/T(秒)',
    'ct_table.personnel_header': '安排人员',
    'ct_table.action_header': '操作',
    'ct_table.select_option': '选择',
    'ct_table.machine_option': '{id}号机 - {ton}T',
    'ct_table.model_search_placeholder': '搜索型号与描述',
    'ct_table.part_no_placeholder': '输入Part No.',
    'ct_table.target_ct_placeholder': '45',
    'ct_table.standard_ct_placeholder': '自动',
    'ct_table.avg_ct_placeholder': '-',
    'ct_table.guide_title': '填写指南',
    'ct_table.guide_date': '设置日期: C/T 记录日期',
    'ct_table.guide_machine': '注塑机号: 选择要记录C/T的注塑机号',
    'ct_table.guide_model': 'Model: 通过型号代码或名称搜索后选择',
    'ct_table.guide_part_no': 'Part No.: 选择所选型号的Part编号',
    'ct_table.guide_target_ct': '设置C/T(秒): 输入目标周期时间(秒)',
    'ct_table.guide_standard_ct': '标准C/T(秒): 基准周期时间，自动查询，必要时可修改',
    'ct_table.guide_avg_ct': '平均C/T(秒): 最近生产的平均周期时间，选择注塑机/Part时自动查询',
    'ct_table.add_row_button': '添加设置',
    'ct_table.reset_button': '重置',
    'ct_table.saving_button': '保存中...', 
    'ct_table.save_all_button': '批量保存',
    'ct_table.min_row_error': '至少需要一行。',
    'ct_table.valid_row_error': '请输入至少一个有效的设置。',
    'ct_table.create_success': '已创建{count}个设置。',
    'ct_table.create_fail': '创建设置失败。',

    // SetupHistory.tsx
    'history.view_timeline': '时间线',
    'history.view_list': '列表',
    'history.machine_part_info': '{machine_no}号机 - {part_no}',
    'unit.seconds': '秒',
    'history.machine_no_label': '注塑机号',
    'history.part_no_label': 'Part No.',
    'history.status_label': '状态',
    'history.date_from_label': '开始日期',
    'history.filter_button': '查询',
    'history.reset_button': '重置',
    'history.title': '设置履历',
    'history.refresh_button': '刷新',
    'history.no_data': '没有查询到设置记录',
    'history.standard_label': '标准',
    'history.mean_label': '平均',
    'history.test_label': '测试',
    'history.approved_label': '批准',
    'history.setup_by_label': '设置人',
    'history.test_count_label': '测试 {count}次',
    'history.test_button': '测试',
    'history.approve_button': '批准',
    'history.reject_button': '拒绝',
    'history.setup_note_label': '设置备注',
    'history.rejection_reason_label': '拒绝理由',
    'history.load_fail': '加载设置列表失败。',
    'history.prev_dates': '更早的日期',
    'history.next_dates': '更近的日期',
    'history.timeline_title': '注塑 C/T、人员记录时间线',
    'history.back_to_dashboard': '返回仪表板',
    'history.machine_unit': '号机',
    'history.target_ct_label': '设置',
    'history.standard_ct_label': '标准',
    'history.mean_ct_label': '平均',
    'history.detail_title': '设置详细信息',
    'history.item_count': '{count}个项目',
    'history.multi_select_on': '多选',
    'history.multi_select_off': '取消选择模式',
    'history.select_all': '全选',
    'history.select_none': '取消选择',
    'history.selected_count': '已选择{count}个',
    'history.delete_selected': '删除所选 ({count})',
    'history.delete_confirm': '确定要删除{machine_no}号机 {part_no}的设置吗？',
    'history.delete_success': '设置已删除。',
    'history.delete_fail': '删除失败。',
    'history.select_items_to_delete': '请选择要删除的项目。',
    'history.bulk_delete_confirm': '确定要删除所选的{count}个设置吗？',
    'history.bulk_delete_success': '{count}个设置已删除。',
    'history.bulk_delete_fail': '部分设置删除失败。',
    'history.list_view_placeholder': '列表视图正在准备中。',

    // ApprovalDialog.tsx
    'approval.approve_title': '设置批准',
    'approval.reject_title': '设置拒绝',
    'approval.machine_label': '注塑机',
    'approval.machine_unit': '号机',
    'approval.part_no_label': 'Part No.',
    'approval.target_ct_label': '目标周期时间',
    'approval.test_ct_label': '测试周期时间',
    'approval.avg_test_ct_label': '平均测试周期时间',
    'approval.test_count_label': '测试次数',
    'approval.quality_pass_rate_label': '质量合格率',
    'approval.final_ct_label': '最终批准周期时间 (秒) *',
    'approval.final_ct_guide': '批准的周期时间将自动反映在PartSpec中。',
    'approval.reject_reason_label': '拒绝理由 *',
    'approval.reject_reason_placeholder': '请具体输入拒绝理由',
    'approval.cancel_button': '取消',
    'approval.approving_button': '批准中...', 
    'approval.rejecting_button': '拒绝中...', 
    'approval.confirm_approve_button': '确认批准',
    'approval.confirm_reject_button': '确认拒绝',
    'approval.ct_error': '请输入正确的批准周期时间。',
    'approval.reason_error': '请输入拒绝理由。',
    'approval.approve_success': '设置已批准。',
    'approval.reject_success': '设置已拒绝。',
    'approval.fail': '设置{action}失败。',

    // TestRecordModal.tsx
    'test_modal.title': '添加测试记录',
    'test_modal.machine_label': '注塑机',
    'test_modal.part_no_label': 'Part No.',
    'test_modal.target_ct_label': '目标周期时间',
    'test_modal.existing_tests_label': '现有测试',
    'test_modal.actual_ct_label': '实际周期时间 (秒) *',
    'test_modal.actual_ct_placeholder': '目标: {time}秒',
    'test_modal.test_qty_label': '测试数量',
    'test_modal.quality_status_label': '质量状态',
    'test_modal.quality_ok': '良好',
    'test_modal.quality_fail': '不良',
    'test_modal.note_label': '测试备注',
    'test_modal.note_placeholder': '请输入在测试过程中发现的特殊事项',
    'test_modal.cancel_button': '取消',
    'test_modal.adding_button': '添加中...', 
    'test_modal.add_button': '添加测试记录',
    'test_modal.ct_error': '请输入正确的实际周期时间。',
    'test_modal.qty_error': '请输入正确的测试数量。',
    'test_modal.add_success': '测试记录已添加。',
    'test_modal.add_fail': '添加测试记录失败。',

    // CycleTimeHistoryGraph.tsx
    'history.ct_trend_title': '{prefix} C/T 趋势分析',
    'history.total_records': '总记录',
    'history.date_range': '期间',
    'history.models_count': '型号数',
  },
};

const LangContext = createContext<LangContextValue>({
  lang: 'ko',
  setLang: () => {}, 
  t: (key: string, _params?: any) => key,
});

export function LangProvider({ children }: { children: ReactNode }) {
  const [lang, setLang] = useState<'ko' | 'zh'>(()=> (localStorage.getItem('lang') as 'ko'|'zh') || 'ko');
  useEffect(()=>{
    localStorage.setItem('lang', lang);
  },[lang]);
  const t = (key: string, params?: any) => {
    let translation = translations[lang][key] || key;
    if (params) {
      Object.keys(params).forEach(paramKey => {
        translation = translation.replace(`{${paramKey}}`, params[paramKey]);
      });
    }
    return translation;
  };
  return (
    <LangContext.Provider value={{ lang, setLang, t }}>
      {children}
    </LangContext.Provider>
  );
}

export function useLang() {
  return useContext(LangContext);
}
