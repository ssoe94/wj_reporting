import { createContext, useContext, useState, useEffect } from 'react';
import type { ReactNode } from 'react';

interface LangContextValue {
  lang: 'ko' | 'zh';
  setLang: (l: 'ko' | 'zh') => void;
  t: (key: string) => string;
}

const translations: Record<'ko' | 'zh', Record<string, string>> = {
  ko: {
    title: '万佳生产数据管理平台',
    modelsTitle: '모델 관리',
    nav_summary: '현황 요약',
    nav_records: '생산 기록',
    nav_new: '신규 등록',
    nav_models: '모델 관리',
    dashboard: '대시보드',

    total_prod: '총 생산 건수',
    avg_ach: '평균 달성률',
    avg_def: '평균 불량률',
    total_prod_unit: '건',
    detailed_record: '상세 기록',
    minutes_unit: '분',
    click_date_guide: '날짜를 눌러 상세 데이터를 확인하세요',
    achievement_rate: '달성율',
    csv_upload: 'CSV 업로드',
    csv_save: 'CSV 저장',
    new_rec_title: '신규 생산 기록 등록',
    report_date: '보고일자',
    machine: '사출기',
    model_search: '모델 검색',
    plan_qty: '계획수량*',
    actual_qty: '양품수량*',
    reported_defect: '불량수량(보고)*',
    actual_defect: '불량수량(실제)',
    start_dt: '시작일시',
    end_dt: '종료일시',
    total_time: '총시간',
    idle_time: '부동시간(분)',
    idle_note: '부동시간 비고',
    run_time: '가동시간',
    cancel: '취소',
    save: '저장',
    saving: '저장중...',
    edit: '수정',
    delete: '삭제',
    close: '닫기',
    new_model: '+ 새 모델',
    search_placeholder: '모델 또는 Part 검색...',
    add_model: '새 모델 추가',
    edit_model: '모델 수정',
    brand: '万佳生产数据管理平台',
    brand_machining: '가공생산관리',
    records_title: '생산 기록',
    no_data: '데이터가 없습니다.',
    loading: '로딩 중…',
    select: '선택',
    save_record: '저장하기',
    confirm_delete: '정말 삭제하시겠습니까?',
    prod_time: '생산 시간',
    prod_report: '생산 보고',
    
    production_record: '생산기록',
    defect_record: '불량기록',
    time_record: '시간 기록',
    qty_personnel_record: '수량/인원 기록',
    supply_type: '공급유형',
    supply_type_placeholder: 'JIT / CSK / SVC',
    supply_type_placeholder_cskd: 'JIT / CSKD / SVC',
    rework_qty: '재작업 수량',
    semi_input_qty: '반제품투입',
    rework_input_qty: '재작업투입',
    total_input_colon: '총투입 :',
    total_defect_minus_rework_colon: '총불량-재작업 :',
    total_input_with_formula: '총투입 (반제품+재작업) :',
    final_defect_with_formula: '최종불량 (총불량-재작업) :',
    prod_qty_short: '생산수량',
    total_input_short: '총투입',
    final_defect_short: '최종불량',
    semi_input_qty_short: '반제품투입',
    rework_input_qty_short: '재작업투입',
    total_defect_short: '총불량',
    total_pieces: '총 사출수량',
    shot_ct: '사출기 C/T(초)',
    good_ct: '양품기준 C/T(초)',
    reset: '초기화',
    lite_mode: '경량 모드',
    delete_success: '삭제되었습니다',
    delete_fail: '삭제 실패',
    save_success: '저장되었습니다',
    save_fail: '저장 실패',
    required_error: '필수 항목을 입력해 주세요',
    update_success: '수정되었습니다',
    update_fail: '수정 실패',
    header_model: '适用 PART NO. 别变更内容',
    header_machine: '사출기번호',
    header_tonnage: '형체력(T)',
    header_plan: '계획생산량',
    header_actual: '양품생산량',
    header_defect: '불량생산량',
    header_start: '시작일시',
    header_end: '종료일시',
    header_run: '가동시간(분)',
    header_note: '비고',
    header_action: '액션',
    modal_edit_title: '기록 수정',
    ct_sec: 'C/T(초)',
    model: '모델',
    machine_no: '사출기번호',
    tonnage: '형체력(T)',
    nav_eco: 'ECO 관리',
    nav_analysis: '생산성 분석',
    ecoTitle: 'ECO 관리',
    new_eco: '새 ECO',
    edit_eco: 'ECO 수정',
    add_eco: '새 ECO 추가',
    eco_search_placeholder: 'ECO 또는 고객 검색...',
    eco_no: 'ECO 번호',
    customer: '고객사',
    description: '내용',
    received_date: '접수일',
    due_date: '완료 예정일',
    close_date: '완료일',
    status: '상태',
    prepared_date: '제정일',
    issued_date: '발표일',
    eco_model: '적용모델',
    change_reason: '변경 사유',
    change_details: '변경 내용',
    applicable_work_order: '备注 （适用工单/时间等）',
    storage_action: '库存处理方法',
    inventory_finished: '완제품 재고',
    inventory_material: '자재 재고',
    applicable_date: '적용일',
    form_type_regular: '정규',
    form_type_temp: '임시',
    delete_confirm: '정말 삭제하시겠습니까?',
    part: 'Part',
    part_no: 'Part No.',
    eco: 'ECO',
    part_status: 'Part Status',
    eco_status: 'ECO Status',
    selected_part_eco_details: '선택 Part ECO 상세',
    all: '전체',
    add_directly: '직접 추가',
    part_search_placeholder: 'Part No 검색...',
    eco_count: 'ECO 건수',
    description_edit_prompt: '의 Description을 수정하세요',
    add_new_part: '새 Part 추가',
    description_placeholder: 'Part 설명을 입력하세요',
    direct_input: '직접 입력',
    input_or_select: '입력 또는 선택',
    '분석 기간 설정': '분석 기간 설정',
    '시작일': '시작일',
    '종료일': '종료일',
    '주말 제외': '주말 제외',
    '기본값으로 초기화': '기본값으로 초기화',
    '비교하기': '비교하기',
    '비교 모드 해제': '비교 모드 해제',
    '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.': '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.',
    '선택된 날짜': '선택된 날짜',
    '날짜 비교 결과': '날짜 비교 결과',
    '사출기별 상세 비교': '사출기별 상세 비교',
    '사출기': '사출기',
    '모델': '모델',
    '양품수': '양품수',
    '성능률': '성능률',
    '품질률': '품질률',
    // OEE 툴팁
    'OEE_툴팁': 'OEE(설비 종합 효율성): (가동률 × 성능률 × 품질률) / 10000\n가동률: 전체 설비 실제 가동시간 / (17대 × 24시간)\n성능률: 실제 생산수(양품+불량) / 목표 생산량\n품질률: 양품수 / 실제 생산수',
    '가동률_툴팁': '가동률(Availability): 전체 설비 실제 가동시간 / (17대 × 24시간)',
    '성능률_툴팁': '성능률(Performance): 실제 생산수(양품+불량) / 목표 생산량',
    '품질률_툴팁': '품질률(Quality): 양품수 / 실제 생산수',
    oee_title: 'OEE (설비 종합 효율성)', // OEE 대시보드 제목
    oee_desc: '설비 종합 효율성을 가동률(A), 성능률(P), 품질률(Q)로 분석합니다.', // OEE 설명
    downtime_title: '다운타임 분석', // 다운타임 카드 제목
    downtime_desc: '비고 필드의 다운타임 정보를 파싱하여 MTTR/MTBF 분석 및 개선 추적을 제공합니다.', // 다운타임 설명
    spc_title: 'SPC & 조기경보', // SPC 카드 제목
    spc_desc: '통계적 공정관리 및 이상 탐지', // SPC 설명
    preparing: '준비 중...', // 준비중 텍스트
    login_title: '로그인',
    login_subtitle: '계정에 로그인하세요',
    username: '사용자명',
    password: '비밀번호',
    username_placeholder: '사용자명을 입력하세요',
    password_placeholder: '비밀번호를 입력하세요',
    login: '로그인',
    logging_in: '로그인 중...',
    logout: '로그아웃',
    password_change: '비밀번호 변경',
    password_change_required: '비밀번호 변경 필수',
    temp_password_notice: '임시 비밀번호를 사용 중입니다. 보안을 위해 새로운 비밀번호로 변경해주세요.',
    current_password: '현재 비밀번호',
    new_password_label: '새 비밀번호 (최소 8자)',
    new_password_confirm: '새 비밀번호 확인',
    password_mismatch: '새 비밀번호가 일치하지 않습니다.',
    password_min_length: '새 비밀번호는 최소 8자 이상이어야 합니다.',
    password_change_success: '비밀번호가 성공적으로 변경되었습니다.',
    changing: '변경 중...',
    request_signup: '가입요청하기',
    signup_request: '가입 요청',
    full_name: '성명',
    department: '부서',
    email: '이메일',
    submit_request: '요청 제출',
    signup_request_success: '가입 요청이 제출되었습니다. 관리자 승인 후 연락드리겠습니다.',
    signup_request_error: '가입 요청 중 오류가 발생했습니다.',
    email_domain_error: '@njwanjia.com 도메인 이메일만 사용 가능합니다.',
    language: '언어',
    start_date: '시작일',
    end_date: '종료일',
    exclude_weekends: '주말 제외',
    reset_to_default: '기본값으로 초기화',
    oee_trend: 'OEE 트렌드',
    availability: '가동률',
    performance: '성능률',
    quality: '품질률',
    compare: '비교하기',
    compare_mode_off: '비교 모드 해제',
    compare_mode_guide: '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.',
    weekday: '(평일)',
    weekend: '(주말)',
    selected_dates: '선택된 날짜',
    '호기': '호기',
    detail_view: '상세 보기',
    donut_view: '도넛 보기',
    total_downtime: '총 다운타임',
    other: '기타', // 파이차트 등에서 기타 항목, zh: 其他
    downtime_min: '다운타임(분)',
    time_min: '시간(분)',
    min_unit: '분',
    downtime: '다운타임',
    downtime_detail: '다운타임 상세',
    date: '날짜',
    reason: '사유',
    duration: '소요시간',
    models_desc: '모델 및 제품 정보를 관리합니다.',
    models_search_placeholder: '모델 또는 Part 검색...',
    eco_desc: 'Engineering Change Order를 관리합니다.',
    eco2Title: 'ECO 통합검색',
    eco2_desc: 'ECO编号, 适用型号, Part no. 통합 검색이 가능합니다.',
    nav_eco2: 'ECO 관리2',
    new_part_spec_btn: '새 Part Spec',
    // 사이드바 네비게이션 번역
    nav_overview: '종합',
    nav_injection: '사출',
    nav_machining: '가공', 
    nav_sales: '영업',
    nav_development: '개발',
    nav_dashboard: 'Dashboard',
    nav_injection_summary: '사출현황요약',
    nav_injection_records: '사출생산기록',
    nav_injection_new: '사출생산등록',
    nav_machining_summary: '가공현황요약', 
    nav_machining_records: '가공생산기록',
    nav_machining_new: '가공생산등록',
    nav_inventory_analysis: '재고분석',
    nav_daily_report: '일일보고',
    nav_inventory_status: '재고 상세 현황',
    nav_eco_management: 'ECO 관리',
    nav_model_management: '모델관리',
    nav_eco2_dev: 'ECO管理 (开发中）',
    
    // 가공 관련 불량 유형
    assembly_defect_title: '불량 분류',
    assembly_injection_defect: '사출불량',
    assembly_injection_defect_desc: '우리 회사 사출라인에서 생산된 불량품',
    assembly_outsourcing_defect: '외주불량', 
    assembly_outsourcing_defect_desc: '외주 업체에서 입고된 불량품',
    assembly_processing_defect: '가공불량',
    assembly_processing_defect_desc: '가공 과정에서 발생한 불량',
    assembly_incoming_defect: '입고불량',
    assembly_incoming_defect_desc: '사출불량 + 외주불량의 합계',
    
    // 가공 생산 관련
    assembly_production_record: '가공 생산 기록',
    assembly_production_summary: '가공 생산 현황',
    assembly_production_register: '가공 생산 등록',
    assembly_line_no: '라인번호',
    assembly_plan_qty: '계획수량',
    assembly_actual_qty: '실제수량',
    assembly_defect_qty: '불량수량',
    assembly_operation_time: '가동시간',
    assembly_uptime_rate: '가동률 (%)',
    
    // Assembly Form 추가 번역
    line_select: '라인 선택',
    add_new_part_prompt: '새 Part 추가',
    production_qty_section: '생산 수량',
    plan_qty_required: '계획수량 *',
    input_qty: '투입수량',
    production_qty_required: '생산수량 *',
    incoming_defect_injection: '입고불량-사출',
    incoming_defect_outsourcing: '입고불량-외주',
    processing_defect: '가공불량',
    time_and_personnel: '시간 및 인원',
    total_time_min_required: '총시간 (분) *',
    idle_time_min: '부동시간 (분)',
    operation_time_min: '작업시간 (분)',
    worker_count: '작업인원 (명)',
    performance_indicators: '성과 지표',
    production_per_hour: '시간당 생산량',
    production_per_person_hour: '인당 시간당 생산량',
    operation_rate_percent: '가동률 (%)',
    operation_time_ratio: '작업시간/총시간',
    production_achievement_rate: '생산달성률 (%)',
    production_vs_plan: '생산/계획수량',
    total_defect_colon: '총 불량:',
    incoming_defect_colon: '입고 불량:',
    processing_defect_rate: '가공 불량률:',
    add_new_part_spec: '새 Part Spec 추가',
    new_part_added_success: '새 Part가 추가되었습니다',
    defect_rate: '불량률',
    similar_parts_prompt: '유사한 Part {first} 외 {count}개가 있습니다. 해당 정보를 사용하시겠습니까?',
    sum: '합계',
    def_scratch: '스크래치',
    def_black_dot: '흑점',
    def_eaten_meat: '끌림',
    def_air_mark: 'Gas mark',
    def_deform: '변형',
    def_short_shot: '미충전',
    def_broken_pillar: '보스 파손',
    def_flow_mark: 'Flow mark',
    def_sink_mark: '수축',
    def_whitening: '백화',
    def_printing: '인쇄',
    def_rework: '가공/수리',
    def_other: '기타',
    
    // ECO2 카드 UI 번역
    related_part_no: '연관 Part No.',
    no_parts_info: 'Part 정보 없음',
    change_reason_missing: '변경 사유 미입력',
    not_issued: '미발표',
    not_set: '미설정',
    more_count: '개 더',
    related_part_no_colon: '相关 Part No.',
    
    // 사출 기록 테이블 헤더
    table_machine: '호기',
    table_model: '모델', 
    table_part_no: 'Part no.',
    table_plan: '계획수량',
    table_actual: '실제수량', 
    table_defect: '불량수량',
    table_run_time: '가동시간 (분)',
    table_ct: '사이클타임 (초)',
    table_ct_delta: 'CT 편차 (초)',
    
    // 가공 기록 관련  
    uph: 'UPH',
  },
  zh: {
    title: '万佳生产数据管理平台',
    modelsTitle: '型号管理',
    nav_summary: '现况概要',
    nav_records: '生产记录',
    nav_new: '新增登记',
    nav_models: '型号管理',
    dashboard: '仪表板',

    total_prod: '总生产件数',
    avg_ach: '平均达成率',
    avg_def: '平均不良率',
    total_prod_unit: '件',
    detailed_record: '详细记录',
    minutes_unit: '分',
    click_date_guide: '点击日期查看详细数据',
    achievement_rate: '达成率',
    csv_upload: '上传CSV',
    csv_save: '保存CSV',
    new_rec_title: '新增生产记录登记',
    report_date: '报告日期',
    machine: '注塑机',
    model_search: '型号搜索',
    plan_qty: '计划数量*',
    actual_qty: '良品数量*',
    reported_defect: '不良数量(报)*',
    actual_defect: '不良数量(实)',
    start_dt: '开始时间',
    end_dt: '结束时间',
    total_time: '总时间',
    idle_time: '停机时间(分)',
    idle_note: '停机备注',
    run_time: '运行时间',
    cancel: '取消',
    save: '保存',
    saving: '保存中...',
    edit: '编辑',
    delete: '删除',
    close: '关闭',
    new_model: '+ 新型号',
    search_placeholder: '搜索型号或部件...',
    add_model: '新增型号',
    edit_model: '编辑型号',
    brand: '万佳生产数据管理平台',
    brand_machining: '加工生产管理',
    records_title: '生产记录',
    no_data: '暂无数据',
    loading: '加载中…',
    select: '选择',
    save_record: '保存',
    confirm_delete: '确定要删除吗？',
    prod_time: '生产时间',
    prod_report: '生产报告',
    
    production_record: '生产记录',
    defect_record: '不良记录',
    time_record: '时间记录',
    qty_personnel_record: '数量/人员记录',
    supply_type: '供给类型',
    supply_type_placeholder: 'JIT / CSK / SVC',
    supply_type_placeholder_cskd: 'JIT / CSKD / SVC',
    rework_qty: '返工数量',
    semi_input_qty: '半成品投入',
    rework_input_qty: '返工投入',
    total_input_colon: '总投入：',
    total_defect_minus_rework_colon: '总不良-返工：',
    total_input_with_formula: '总投入 (半成品+返工)：',
    final_defect_with_formula: '最终不良 (总不良-返工)：',
    prod_qty_short: '生产数量',
    total_input_short: '总投入',
    final_defect_short: '最终不良',
    semi_input_qty_short: '半成品投入',
    rework_input_qty_short: '返工投入',
    total_defect_short: '总不良',
    total_pieces: '总射出数',
    shot_ct: '注塑机 C/T(秒)',
    good_ct: '良品基准 C/T(秒)',
    reset: '重置',
    lite_mode: '简易模式',
    delete_success: '已删除',
    delete_fail: '删除失败',
    save_success: '已保存',
    save_fail: '保存失败',
    required_error: '请填写必填项',
    update_success: '已更新',
    update_fail: '更新失败',
    header_model: '适用 PART NO. 别变更内容',
    header_machine: '注塑机号',
    header_tonnage: '锁模力(T)',
    header_plan: '计划产量',
    header_actual: '良品产量',
    header_defect: '不良产量',
    header_start: '开始时间',
    header_end: '结束时间',
    header_run: '运行时间(分)',
    header_note: '备注',
    header_action: '操作',
    modal_edit_title: '编辑记录',
    ct_sec: 'C/T(秒)',
    model: '型号',
    machine_no: '注塑机号',
    tonnage: '锁模力(T)',
    nav_eco: 'ECO管理',
    nav_analysis: '生产力分析',
    ecoTitle: 'ECO管理',
    new_eco: '新增ECO',
    edit_eco: '编辑ECO',
    add_eco: '新增ECO',
    eco_search_placeholder: '搜索ECO或客户...',
    eco_no: 'ECO编号',
    customer: '客户',
    description: '内容',
    received_date: '接收日期',
    due_date: '预计完成日期',
    close_date: '完成日期',
    status: '状态',
    prepared_date: '制定日',
    issued_date: '发布日',
    eco_model: '适用型号',
    change_reason: '变更理由',
    change_details: '变更内容',
    applicable_work_order: '备注 （适用工单/时间等）',
    storage_action: '库存处理方法',
    inventory_finished: '成品库存',
    inventory_material: '材料库存',
    applicable_date: '适用日期',
    form_type_regular: '正式',
    form_type_temp: '临时',
    delete_confirm: '确定要删除吗?',
    part: '部件',
    eco: 'ECO',
    part_status: '部件状态',
    eco_status: 'ECO状态',
    selected_part_eco_details: '所选部件ECO明细',
    all: '全部',
    add_directly: '直接添加',
    part_search_placeholder: '搜索Part No...',
    eco_count: 'ECO数量',
    description_edit_prompt: '的Description修改',
    add_new_part: '添加新Part',
    description_placeholder: '请输入Part描述',
    direct_input: '直接输入',
    input_or_select: '输入或选择',
    '분석 기간 설정': '分析期间设置',
    '시작일': '开始日期',
    '종료일': '结束日期',
    '주말 제외': '排除周末',
    '기본값으로 초기화': '恢复默认',
    '비교하기': '对比',
    '비교 모드 해제': '取消对比模式',
    '비교 모드: 그래프에서 두 개의 날짜를 클릭하여 비교하세요.': '对比模式：请在图表中点击两个日期进行对比。',
    '선택된 날짜': '已选日期',
    '날짜 비교 결과': '日期对比结果',
    '사출기별 상세 비교': '按注塑机详细对比',
    '사출기': '注塑机',
    '모델': '机型',
    '양품수': '良品数',
    '성능률': '性能率',
    '품질률': '品质率',
    // OEE 툴팁
    'OEE_툴팁': 'OEE（设备综合效率）：(稼动率 × 性能率 × 品质率) / 10000\n稼动率：所有设备实际运行时间 / (17台 × 24小时)\n性能率：实际产量（良品+不良品）/ 目标产量\n品质率：良品数 / 实际产量',
    '가동률_툴팁': '稼动率(Availability)：所有设备实际运行时间 / (17台 × 24小时)',
    '성능률_툴팁': '性能率(Performance)：实际产量（良品+不良品）/ 目标产量',
    '품질률_툴팁': '品质率(Quality)：良品数 / 实际产量',
    oee_title: 'OEE（设备综合效率）', // OEE 대시보드 제목
    oee_desc: '通过稼动率(A)、性能率(P)、品质率(Q)分析设备综合效率。', // OEE 설명
    downtime_title: '停机分析', // 다운타임 카드 제목
    downtime_desc: '解析备注栏的停机信息，提供MTTR/MTBF分析及改善追踪。', // 다운타임 설명
    spc_title: 'SPC & 预警', // SPC 카드 제목
    spc_desc: '统计过程管理与异常检测', // SPC 설명
    preparing: '准备中...', // 준비중 텍스트
    login_title: '登录',
    login_subtitle: '请登录您的账户',
    username: '用户名',
    password: '密码',
    username_placeholder: '请输入用户名',
    password_placeholder: '请输入密码',
    login: '登录',
    logging_in: '登录中...',
    logout: '退出',
    password_change: '修改密码',
    password_change_required: '必须更改密码',
    temp_password_notice: '您正在使用临时密码。出于安全考虑，请更改为新的密码。',
    current_password: '当前密码',
    new_password_label: '新密码（至少8位）',
    new_password_confirm: '确认新密码',
    password_mismatch: '两次输入的新密码不一致。',
    password_min_length: '新密码至少8位。',
    password_change_success: '密码修改成功。',
    changing: '修改中...',
    request_signup: '申请注册',
    signup_request: '注册申请',
    full_name: '姓名',
    department: '部门',
    email: '邮箱',
    submit_request: '提交申请',
    signup_request_success: '注册申请已提交，管理员审批后将与您联系。',
    signup_request_error: '注册申请过程中发生错误。',
    email_domain_error: '仅支持 @njwanjia.com 域名邮箱。',
    language: '语言',
    start_date: '开始日期',
    end_date: '结束日期',
    exclude_weekends: '排除周末',
    reset_to_default: '恢复默认',
    oee_trend: 'OEE趋势',
    availability: '稼动率',
    performance: '性能率',
    quality: '品质率',
    compare: '对比',
    compare_mode_off: '取消对比模式',
    compare_mode_guide: '对比模式：请在图表中点击两个日期进行对比。',
    weekday: '(工作日)',
    weekend: '(周末)',
    selected_dates: '已选日期',
    '호기': '号机',
    detail_view: '详细查看',
    donut_view: '环形图',
    total_downtime: '总停机',
    other: '其他', // 파이차트 등에서 기타 항목
    downtime_min: '停机(分)',
    time_min: '时间(分)',
    min_unit: '分钟',
    downtime: '停机',
    downtime_detail: '停机详情',
    date: '日期',
    reason: '原因',
    duration: '用时',
    part_specs: 'Part Spec列表',
    part_no: 'Part No.',
    mold_type: '模具类型',
    color: '颜色',
    resin_type: '树脂种类',
    resin_code: '树脂代码',
    net_g: '净重(g)',
    sr_g: 'S/R重(g)',
    ct_s: 'C/T(秒)',
    cavity: '模穴数',
    valid_from: '生效日期',
    new_part_spec: '新增Part Spec',
    part_spec_save_success: 'Part Spec已保存',
    part_spec_save_fail: 'Part Spec保存失败',
    models_desc: '管理型号及产品信息。',
    models_search_placeholder: '搜索型号或部件...',
    eco_desc: '管理Engineering Change Order。',
    eco2Title: 'ECO 统合搜索',
    eco2_desc: 'ECO编号, 适用型号, Part no. 统合搜索功能。',
    nav_eco2: 'ECO管理2',
    new_part_spec_btn: '新增Part Spec',
    // 사이드바 네비게이션 번역
    nav_overview: '综合',
    nav_injection: '注塑',
    nav_machining: '加工', 
    nav_sales: '销售',
    nav_development: '开发',
    nav_dashboard: '仪表板',
    nav_injection_summary: '注塑现况概要',
    nav_injection_records: '注塑生产记录',
    nav_injection_new: '注塑生产登记',
    nav_machining_summary: '加工现况概要', 
    nav_machining_records: '加工生产记录',
    nav_machining_new: '加工生产登记',
    nav_inventory_analysis: '库存分析',
    nav_daily_report: '日报',
    nav_inventory_status: '库存详细现况',
    nav_eco_management: 'ECO管理',
    nav_model_management: '型号管理',
    nav_eco2_dev: 'ECO管理 (开发中）',
    
    // 가공 관련 불량 유형
    assembly_defect_title: '不良分类',
    assembly_injection_defect: '注塑不良',
    assembly_injection_defect_desc: '我司注塑产线上生产的不良品',
    assembly_outsourcing_defect: '外协不良', 
    assembly_outsourcing_defect_desc: '外协供应商送来的不良品',
    assembly_processing_defect: '加工不良',
    assembly_processing_defect_desc: '在加工流程中产生的不良',
    assembly_incoming_defect: '来料不良',
    assembly_incoming_defect_desc: '注塑不良 + 外协不良 的合计',
    
    // 가공 생산 관련
    assembly_production_record: '加工生产记录',
    assembly_production_summary: '加工生产现况',
    assembly_production_register: '加工生产登记',
    assembly_line_no: '产线号',
    assembly_plan_qty: '计划数量',
    assembly_actual_qty: '实际数量',
    assembly_defect_qty: '不良数量',
    assembly_operation_time: '运行时间',
    assembly_uptime_rate: '设备利用率 (%)',
    
    // Assembly Form 추가 번역
    line_select: '选择产线',
    add_new_part_prompt: '添加新零件',
    production_qty_section: '生产数量',
    plan_qty_required: '计划数量 *',
    input_qty: '投入数量',
    production_qty_required: '生产数量 *',
    incoming_defect_injection: '来料不良-注塑',
    incoming_defect_outsourcing: '来料不良-外协',
    processing_defect: '加工不良',
    time_and_personnel: '时间及人员',
    total_time_min_required: '总时间 (分) *',
    idle_time_min: '停机时间 (分)',
    operation_time_min: '作业时间 (分)',
    worker_count: '作业人员 (名)',
    performance_indicators: '绩效指标',
    production_per_hour: '每小时产量',
    production_per_person_hour: '人均每小时产量',
    operation_rate_percent: '设备利用率 (%)',
    operation_time_ratio: '作业时间/总时间',
    production_achievement_rate: '生产达成率 (%)',
    production_vs_plan: '生产/计划数量',
    total_defect_colon: '总不良：',
    incoming_defect_colon: '来料不良：',
    processing_defect_rate: '加工不良率：',
    add_new_part_spec: '添加新零件规格',
    new_part_added_success: '新零件已添加',
    defect_rate: '不良率',
    similar_parts_prompt: '存在相似的零件 {first} 等共 {count} 个。是否使用其信息进行预填？',
    sum: '合计',
    def_scratch: '划伤',
    def_black_dot: '黑点',
    def_eaten_meat: '吃肉',
    def_air_mark: '气印',
    def_deform: '变形',
    def_short_shot: '浇不足',
    def_broken_pillar: '断柱子',
    def_flow_mark: '料花',
    def_sink_mark: '缩瘪',
    def_whitening: '发白',
    def_printing: '印刷',
    def_rework: '加工修理',
    def_other: '其他',
    
    // ECO2 카드 UI 번역
    related_part_no: '相关零件号',
    no_parts_info: '无零件信息',
    change_reason_missing: '未输入变更理由',
    not_issued: '未发布',
    not_set: '未设置',
    more_count: '个更多',
    related_part_no_colon: '相关 Part No.',
    
    // 사출 기록 테이블 헤더
    table_machine: '机台',
    table_model: '型号',
    table_part_no: 'Part no.', 
    table_plan: '计划数量',
    table_actual: '实际数量',
    table_defect: '不良数量',
    table_run_time: '运转时间 (分)',
    table_ct: '周期时间 (秒)',
    table_ct_delta: '周期差异 (秒)',
    
    // 가공 기록 관련
    uph: 'UPH',
  },
};

const LangContext = createContext<LangContextValue>({
  lang: 'ko',
  setLang: () => {},
  t: (k) => k,
});

export function LangProvider({ children }: { children: ReactNode }) {
  const [lang, setLang] = useState<'ko' | 'zh'>(()=> (localStorage.getItem('lang') as 'ko'|'zh') || 'ko');
  useEffect(()=>{
    localStorage.setItem('lang', lang);
  },[lang]);
  const t = (key: string) => translations[lang][key] || key;
  return (
    <LangContext.Provider value={{ lang, setLang, t }}>
      {children}
    </LangContext.Provider>
  );
}

export function useLang() {
  return useContext(LangContext);
} 